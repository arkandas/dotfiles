# Apache 2 noip config

1. Install Apache2, ddclient and letsencrypt

```bash
sudo apt-get update -y && sudo apt-get install -y apache2 ddclient letsencrypt certbot python3-certbot-apache
```

2. Enable `apache2` modules

```bash
sudo a2enmod ssl
sudo a2enmod rewrite
```

3. Configure `/etc/ddclient.conf`

```bash
# Configuration file for ddclient generated by debconf
#
# /etc/ddclient.conf

use=web
ssl=yes
protocol=noip
login=mail@mail.com
password=password
hostA.com,hostB.com/etc...
```

1. Configure `ddclient` to run as a daemon

```bash
echo 'run_daemon="true"' | sudo tee -a /etc/default/ddclient
sudo service ddclient restart
journalctl -u ddclient.service
```

5. Create new letsencrypt certificate for `apache2`

```bash
sudo letsencrypt --apache -d hostA.com
```

6. Create new virtualhost at `/etc/apache2/sites-available`

7. Enable host

```bash
sudo a2ensite hostA.conf 
sudo systemctl restart apache2
```

8. Copy web content to `/var/www/xxx` and add `.htaccess` file
